#!/bin/bash
set -e

CONTAINER_NAME="hyprome-dev-distrobox-quadlet"
IMAGE="ghcr.io/rom3dius/hyprome-dev:latest"

echo "ğŸ”» Stopping container..."
systemctl --user stop hyprome-dev.service || true
podman stop "$CONTAINER_NAME" || true

echo "ğŸ§¹ Removing container..."
podman rm "$CONTAINER_NAME" || true

echo "â¬‡ï¸ Pulling latest image..."
podman pull "$IMAGE"

echo "ğŸ”„ Restarting container via systemd..."
systemctl --user daemon-reexec
systemctl --user daemon-reload
systemctl --user restart hyprome-dev.service

echo "âœ… Container $CONTAINER_NAME has been reset and restarted."
